"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[8122],{8453(e,n,i){i.d(n,{R:()=>l,x:()=>c});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},9811(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"architecture/trd","title":"Technical Reference & Architecture","description":"Version: v4.0 (Federated Execution, Authority-First, Agent-Native Persistence)","source":"@site/../docs/architecture/trd.md","sourceDirName":"architecture","slug":"/architecture/trd","permalink":"/architecture/trd","draft":false,"unlisted":false,"editUrl":"https://github.com/Rainminds/gantral/tree/main/../docs/architecture/trd.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Technical Reference & Architecture"},"sidebar":"tutorialSidebar","previous":{"title":"Executive Briefings","permalink":"/executive/"},"next":{"title":"State Machine","permalink":"/architecture/state-machine"}}');var r=i(4848),t=i(8453);const l={sidebar_position:1,title:"Technical Reference & Architecture"},c="Technical Reference & Architecture Document (TRD)",a={},d=[{value:"Purpose",id:"purpose",level:2},{value:"1. Scope &amp; Non-Goals",id:"1-scope--non-goals",level:2},{value:"1.1 What Gantral Is (Technical Definition)",id:"11-what-gantral-is-technical-definition",level:3},{value:"1.2 Explicit Non-Goals (Hard Exclusions)",id:"12-explicit-non-goals-hard-exclusions",level:3},{value:"2. Architectural Invariants (Non-Negotiable)",id:"2-architectural-invariants-non-negotiable",level:2},{value:"Agent-Native Persistence (Critical Invariant)",id:"agent-native-persistence-critical-invariant",level:3},{value:"3. High-Level Architecture",id:"3-high-level-architecture",level:2},{value:"3.1 Logical Architecture Layers",id:"31-logical-architecture-layers",level:3},{value:"3.2 Runtime Model (Authoritative)",id:"32-runtime-model-authoritative",level:3},{value:"3.3 Execution Plane Responsibility Boundary",id:"33-execution-plane-responsibility-boundary",level:3},{value:"3.4 Execution Readiness vs Execution State",id:"34-execution-readiness-vs-execution-state",level:3},{value:"4. Core Domain Model",id:"4-core-domain-model",level:2},{value:"4.1 Core Entities",id:"41-core-entities",level:3},{value:"4.2 Identity &amp; Integration Entities",id:"42-identity--integration-entities",level:3},{value:"5. Execution State Machine",id:"5-execution-state-machine",level:2},{value:"Guarantees",id:"guarantees",level:3},{value:"6. Policy Evaluation Semantics",id:"6-policy-evaluation-semantics",level:2},{value:"7. Determinism &amp; Replay Model",id:"7-determinism--replay-model",level:2},{value:"8. APIs &amp; SDKs",id:"8-apis--sdks",level:2},{value:"9. Repository Structure",id:"9-repository-structure",level:2},{value:"10. Data Stores",id:"10-data-stores",level:2},{value:"11. Security Architecture",id:"11-security-architecture",level:2},{value:"12. Privacy &amp; Compliance",id:"12-privacy--compliance",level:2},{value:"13. Infrastructure &amp; IaC",id:"13-infrastructure--iac",level:2},{value:"14. Standards &amp; Interoperability",id:"14-standards--interoperability",level:2},{value:"15. Licensing &amp; Governance",id:"15-licensing--governance",level:2},{value:"16. Execution Evidence References (Non-Authoritative)",id:"16-execution-evidence-references-non-authoritative",level:2},{value:"17. Final Principle",id:"17-final-principle",level:2}];function o(e){const n={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"technical-reference--architecture-document-trd",children:"Technical Reference & Architecture Document (TRD)"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Version:"})," v4.0 (Federated Execution, Authority-First, Agent-Native Persistence)",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Status:"})," Living technical reference (authoritative)",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.strong,{children:"Audience:"})," Core contributors, platform engineers, security reviewers, enterprise architects"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsxs)(n.p,{children:["This document is the ",(0,r.jsx)(n.strong,{children:"technical constitution"})," of the Gantral open-source core."]}),"\n",(0,r.jsxs)(n.p,{children:["It defines the architectural invariants, execution semantics, responsibility boundaries, and control guarantees that ",(0,r.jsx)(n.strong,{children:"must hold across all implementations"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral deliberately separates ",(0,r.jsx)(n.strong,{children:"execution authority"})," from ",(0,r.jsx)(n.strong,{children:"agent reasoning and memory"}),"."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If an implementation conflicts with this document, the implementation is incorrect."})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-scope--non-goals",children:"1. Scope & Non-Goals"}),"\n",(0,r.jsx)(n.h3,{id:"11-what-gantral-is-technical-definition",children:"1.1 What Gantral Is (Technical Definition)"}),"\n",(0,r.jsxs)(n.p,{children:["Gantral is an ",(0,r.jsx)(n.strong,{children:"AI Execution Control Plane"})," that standardizes how AI-assisted and agentic workflows:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Execute"}),"\n",(0,r.jsx)(n.li,{children:"Pause"}),"\n",(0,r.jsx)(n.li,{children:"Escalate"}),"\n",(0,r.jsx)(n.li,{children:"Resume"}),"\n",(0,r.jsx)(n.li,{children:"Terminate"}),"\n",(0,r.jsx)(n.li,{children:"Are audited"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"across teams, domains, and systems."}),"\n",(0,r.jsx)(n.p,{children:"Technically, Gantral provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A deterministic, instance-first execution state machine"}),"\n",(0,r.jsx)(n.li,{children:"Human-in-the-Loop (HITL) as a first-class execution state"}),"\n",(0,r.jsx)(n.li,{children:"Instance-level isolation for audit, cost, and accountability"}),"\n",(0,r.jsx)(n.li,{children:"Declarative control policies for materiality, authority, and escalation"}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.strong,{children:"pluggable policy evaluation interface"})," (advisory only)"]}),"\n",(0,r.jsxs)(n.li,{children:["Control APIs and SDKs that sit ",(0,r.jsx)(n.strong,{children:"above agent frameworks and below enterprise systems"})]}),"\n",(0,r.jsx)(n.li,{children:"Deterministic execution and replay guarantees via a workflow runtime"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral is ",(0,r.jsx)(n.strong,{children:"domain-agnostic by design"}),".",(0,r.jsx)(n.br,{}),"\n","SDLC workflows are an initial wedge, not the boundary."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"12-explicit-non-goals-hard-exclusions",children:"1.2 Explicit Non-Goals (Hard Exclusions)"}),"\n",(0,r.jsxs)(n.p,{children:["Gantral will ",(0,r.jsx)(n.strong,{children:"not"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Build, host, or orchestrate AI agents"}),"\n",(0,r.jsx)(n.li,{children:"Encode domain-specific business logic"}),"\n",(0,r.jsx)(n.li,{children:"Manage agent prompts, plans, or internal memory"}),"\n",(0,r.jsx)(n.li,{children:"Serialize or persist agent internal state"}),"\n",(0,r.jsx)(n.li,{children:"Optimize, train, or fine-tune models"}),"\n",(0,r.jsx)(n.li,{children:"Provide autonomous decision loops"}),"\n",(0,r.jsx)(n.li,{children:"Make probabilistic decisions without human accountability"}),"\n",(0,r.jsx)(n.li,{children:"Replace CI/CD, ITSM, ticketing, or enterprise systems"}),"\n",(0,r.jsx)(n.li,{children:"Store raw secrets or credentials"}),"\n",(0,r.jsx)(n.li,{children:"Act as an identity provider"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-architectural-invariants-non-negotiable",children:"2. Architectural Invariants (Non-Negotiable)"}),"\n",(0,r.jsx)(n.p,{children:"The following invariants must hold across all implementations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Instance-first semantics"}),(0,r.jsx)(n.br,{}),"\n","All audit, cost, authority, and replay semantics attach to immutable execution instances"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"HITL is a state transition"}),(0,r.jsx)(n.br,{}),"\n","Human intervention is modeled inside the execution graph, not as an external approval"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Human authority is final"}),(0,r.jsx)(n.br,{}),"\n","AI output is advisory; policy-enforced human decisions override AI"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Determinism > performance"}),(0,r.jsx)(n.br,{}),"\n","Replayability and auditability take precedence over latency"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Declarative control"}),(0,r.jsx)(n.br,{}),"\n","Materiality, authority, and escalation rules are configuration, not embedded logic"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Adapters contain no business logic"}),(0,r.jsx)(n.br,{}),"\n","Integrations emit events and receive decisions only"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Identity federation required"}),(0,r.jsx)(n.br,{}),"\n","Identity is derived from upstream IdPs; Gantral maintains no user directory"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"No secret persistence"}),(0,r.jsx)(n.br,{}),"\n","Gantral stores only references; secrets resolve at execution edges"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"agent-native-persistence-critical-invariant",children:"Agent-Native Persistence (Critical Invariant)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Execution State vs Agent State Separation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Gantral owns execution state (",(0,r.jsx)(n.code,{children:"RUNNING"}),", ",(0,r.jsx)(n.code,{children:"WAITING_FOR_HUMAN"}),", etc.)"]}),"\n",(0,r.jsx)(n.li,{children:"Agent frameworks own agent internal state (memory, plans, tool context)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Checkpointability Requirement"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Agents integrated with Gantral ",(0,r.jsx)(n.strong,{children:"must be restartable"})," from an externally persisted checkpoint"]}),"\n",(0,r.jsx)(n.li,{children:"Agent internal state persistence is handled by the agent framework (DB, object storage)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"No Agent State in Gantral"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Agent internal state must never be serialized into Gantral execution history"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Violating these invariants ",(0,r.jsx)(n.strong,{children:"invalidates the system"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-high-level-architecture",children:"3. High-Level Architecture"}),"\n",(0,r.jsx)(n.h3,{id:"31-logical-architecture-layers",children:"3.1 Logical Architecture Layers"}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart TB\n    ES["Enterprise Systems\\n(GitHub, Jira, Slack,\\nServiceNow, Custom Apps)"]\n\n    G["Gantral Control Plane\\nExecution Engine\\nHITL State Machine\\nPolicy Interface\\nInstance Registry\\nAudit Semantics"]\n\n    A["Agent Frameworks & Runners\\nReasoning, Memory,\\nTool Execution"]\n\n    ES --\x3e|Events / Decisions| G\n    G --\x3e|SDK / Control APIs| A'}),"\n",(0,r.jsxs)(n.p,{children:["Gantral is the ",(0,r.jsx)(n.strong,{children:"execution authority"}),".\nAgents execute actions but ",(0,r.jsx)(n.strong,{children:"cannot self-advance authority"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"32-runtime-model-authoritative",children:"3.2 Runtime Model (Authoritative)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Trigger received (event, schedule, external signal)"}),"\n",(0,r.jsx)(n.li,{children:"Workflow template selected"}),"\n",(0,r.jsxs)(n.li,{children:["Instance created (immutable ",(0,r.jsx)(n.code,{children:"instance_id"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Execution proceeds inside a deterministic workflow runtime"}),"\n",(0,r.jsxs)(n.li,{children:["Policy evaluation runs ",(0,r.jsx)(n.strong,{children:"as a transition guard"})]}),"\n",(0,r.jsxs)(n.li,{children:["Execution continues or transitions to ",(0,r.jsx)(n.code,{children:"WAITING_FOR_HUMAN"})]}),"\n",(0,r.jsx)(n.li,{children:"Agent framework checkpoints state and suspends execution"}),"\n",(0,r.jsx)(n.li,{children:"Human decision captured (if required)"}),"\n",(0,r.jsx)(n.li,{children:"Execution resumes or terminates via a new process"}),"\n",(0,r.jsx)(n.li,{children:"Audit record sealed"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"33-execution-plane-responsibility-boundary",children:"3.3 Execution Plane Responsibility Boundary"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gantral owns"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Execution state"}),"\n",(0,r.jsx)(n.li,{children:"Authority transitions"}),"\n",(0,r.jsx)(n.li,{children:"Time, retries, escalation, and replay"}),"\n",(0,r.jsx)(n.li,{children:"Audit correctness"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Agent frameworks own"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reasoning, planning, and tool execution"}),"\n",(0,r.jsx)(n.li,{children:"Agent memory and conversation history"}),"\n",(0,r.jsx)(n.li,{children:"Internal checkpoints and resume logic"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Runners"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Execute agent processes"}),"\n",(0,r.jsx)(n.li,{children:"Detect completion, failure, or suspension"}),"\n",(0,r.jsx)(n.li,{children:"Translate agent lifecycle signals into Gantral execution events"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Agents ",(0,r.jsx)(n.strong,{children:"cannot"})," advance execution past governed states independently."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"34-execution-readiness-vs-execution-state",children:"3.4 Execution Readiness vs Execution State"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Execution State"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Canonical and immutable"}),"\n",(0,r.jsx)(n.li,{children:"Persisted and auditable"}),"\n",(0,r.jsx)(n.li,{children:"Used for compliance and replay"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Execution Readiness"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Derived and transient"}),"\n",(0,r.jsx)(n.li,{children:"Evaluated continuously"}),"\n",(0,r.jsx)(n.li,{children:"Not persisted"}),"\n",(0,r.jsx)(n.li,{children:"Not part of the state machine"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Formally:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"runnable(instance) =\n  execution_state == RUNNING\n  AND no pending HITL decisions\n  AND no policy blocks\n  AND execution plane capacity available\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-core-domain-model",children:"4. Core Domain Model"}),"\n",(0,r.jsx)(n.h3,{id:"41-core-entities",children:"4.1 Core Entities"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Workflow (Template)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"}),", ",(0,r.jsx)(n.code,{children:"version"})]}),"\n",(0,r.jsx)(n.li,{children:"Step graph"}),"\n",(0,r.jsx)(n.li,{children:"Trigger definitions"}),"\n",(0,r.jsx)(n.li,{children:"Policy references"}),"\n",(0,r.jsx)(n.li,{children:"Materiality level"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Instance (Execution)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Immutable ",(0,r.jsx)(n.code,{children:"instance_id"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"workflow_id"})," + ",(0,r.jsx)(n.code,{children:"version"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"owning_team_id"})}),"\n",(0,r.jsx)(n.li,{children:"Trigger context"}),"\n",(0,r.jsx)(n.li,{children:"Execution state"}),"\n",(0,r.jsx)(n.li,{children:"Timestamps"}),"\n",(0,r.jsx)(n.li,{children:"Cost metadata"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"HITL Decision"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"decision_id"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"instance_id"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"decision_type"})," (APPROVE / REJECT / OVERRIDE)"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"human_actor_id"})}),"\n",(0,r.jsx)(n.li,{children:"Role"}),"\n",(0,r.jsx)(n.li,{children:"Justification"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"context_snapshot"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"context_delta"})," (required for OVERRIDE)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"42-identity--integration-entities",children:"4.2 Identity & Integration Entities"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Service Identity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"identity_id"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"owner_team_id"})}),"\n",(0,r.jsx)(n.li,{children:"External principal mapping (IAM role, K8s service account)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Connection"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"connection_id"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"type"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"config_ref"})," (e.g. ",(0,r.jsx)(n.code,{children:"vault://\u2026"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Runner"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"runner_id"})}),"\n",(0,r.jsx)(n.li,{children:"Subscribed task queues"}),"\n",(0,r.jsx)(n.li,{children:"Capability metadata (network zone, GPU, OS)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-execution-state-machine",children:"5. Execution State Machine"}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart TB\n    CREATED --\x3e RUNNING\n    RUNNING --\x3e|Policy Requires HITL| WAITING_FOR_HUMAN\n\n    WAITING_FOR_HUMAN --\x3e APPROVED\n    WAITING_FOR_HUMAN --\x3e REJECTED\n    WAITING_FOR_HUMAN --\x3e OVERRIDDEN\n\n    APPROVED --\x3e RESUMED\n    OVERRIDDEN --\x3e RESUMED\n    REJECTED --\x3e TERMINATED\n\n    RESUMED --\x3e COMPLETED"}),"\n",(0,r.jsx)(n.h3,{id:"guarantees",children:"Guarantees"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"State transitions are append-only"}),"\n",(0,r.jsx)(n.li,{children:"No in-place mutation"}),"\n",(0,r.jsx)(n.li,{children:"Every transition is timestamped and signed"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-policy-evaluation-semantics",children:"6. Policy Evaluation Semantics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Policy evaluation does ",(0,r.jsx)(n.strong,{children:"not"})," introduce new execution states"]}),"\n",(0,r.jsx)(n.li,{children:"Evaluation runs synchronously during transitions"}),"\n",(0,r.jsxs)(n.li,{children:["Results determine continuation vs ",(0,r.jsx)(n.code,{children:"WAITING_FOR_HUMAN"})]}),"\n",(0,r.jsxs)(n.li,{children:["Policy engines ",(0,r.jsx)(n.strong,{children:"never hold authority"})]}),"\n",(0,r.jsx)(n.li,{children:"Policy evaluation must not depend on tool payloads or execution evidence"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Policies are ",(0,r.jsx)(n.strong,{children:"transition guards"}),", not durable state."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-determinism--replay-model",children:"7. Determinism & Replay Model"}),"\n",(0,r.jsxs)(n.p,{children:["Gantral guarantees deterministic replay of ",(0,r.jsx)(n.strong,{children:"execution decisions"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Replay re-executes workflow logic from recorded history"}),"\n",(0,r.jsx)(n.li,{children:"Identical inputs, events, and policy versions must yield identical outcomes"}),"\n",(0,r.jsxs)(n.li,{children:["Agent internal memory is ",(0,r.jsx)(n.strong,{children:"not"})," replayed"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral defines ",(0,r.jsx)(n.strong,{children:"what must be replayable"}),".\nThe workflow runtime defines ",(0,r.jsx)(n.strong,{children:"how replay occurs"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral does ",(0,r.jsx)(n.strong,{children:"not"})," implement a separate replay engine."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-apis--sdks",children:"8. APIs & SDKs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"REST and gRPC APIs (OpenAPI 3.1)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Core API groups:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/workflows"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/instances"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/decisions"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/policies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"/audit"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["SDKs are ",(0,r.jsx)(n.strong,{children:"thin wrappers"}),".\nAll logic remains server-side."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-repository-structure",children:"9. Repository Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/gantral\n  /docs\n  /specs\n  /core\n  /engine\n  /policy\n  /hitl\n  /audit\n  /api\n  /sdk\n  /adapters\n  /infra\n  /tests\n"})}),"\n",(0,r.jsx)(n.p,{children:"Principles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Specs first"}),"\n",(0,r.jsx)(n.li,{children:"Code follows spec"}),"\n",(0,r.jsx)(n.li,{children:"No UI in OSS core"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"10-data-stores",children:"10. Data Stores"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Technology"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Execution state"}),(0,r.jsx)(n.td,{children:"Event-sourced workflow history"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Immutable logs"}),(0,r.jsx)(n.td,{children:"Append-only log store"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Snapshots"}),(0,r.jsx)(n.td,{children:"Object storage (S3-compatible)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Caching"}),(0,r.jsx)(n.td,{children:"Redis (optional)"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Agent internal state stores are ",(0,r.jsx)(n.strong,{children:"out of scope"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"11-security-architecture",children:"11. Security Architecture"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Identity: OAuth 2.0 / OIDC (federated)"}),"\n",(0,r.jsx)(n.li,{children:"Authorization: Policy-driven RBAC"}),"\n",(0,r.jsx)(n.li,{children:"Secrets: External secret managers only"}),"\n",(0,r.jsx)(n.li,{children:"Audit: 100% decision capture, tamper-evident logs"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"12-privacy--compliance",children:"12. Privacy & Compliance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Data minimization by default"}),"\n",(0,r.jsx)(n.li,{children:"Configurable redaction"}),"\n",(0,r.jsx)(n.li,{children:"Self-hosted and air-gapped deployments supported"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Compliance is a ",(0,r.jsx)(n.strong,{children:"structural property"})," of the execution model."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"13-infrastructure--iac",children:"13. Infrastructure & IaC"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deployment: Kubernetes (primary), Docker Compose (dev)"}),"\n",(0,r.jsx)(n.li,{children:"Workflow runtime: Temporal"}),"\n",(0,r.jsx)(n.li,{children:"IaC: Terraform, Helm"}),"\n",(0,r.jsx)(n.li,{children:"Observability: OpenTelemetry, Prometheus, structured logs"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"14-standards--interoperability",children:"14. Standards & Interoperability"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"OpenAPI 3.1"}),"\n",(0,r.jsx)(n.li,{children:"OpenTelemetry"}),"\n",(0,r.jsx)(n.li,{children:"OAuth 2.0 / OIDC"}),"\n",(0,r.jsx)(n.li,{children:"CNCF-aligned design principles"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"15-licensing--governance",children:"15. Licensing & Governance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"License: Apache 2.0"}),"\n",(0,r.jsx)(n.li,{children:"Governance: Maintainer-led with public RFCs"}),"\n",(0,r.jsx)(n.li,{children:"No dual-license bait-and-switch"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"16-execution-evidence-references-non-authoritative",children:"16. Execution Evidence References (Non-Authoritative)"}),"\n",(0,r.jsxs)(n.p,{children:["Gantral may record ",(0,r.jsx)(n.strong,{children:"references"})," to external execution evidence to support human decision-making and audit."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Evidence is captured outside Gantral (by runners or external systems)"}),"\n",(0,r.jsx)(n.li,{children:"Gantral stores only immutable references or hashes"}),"\n",(0,r.jsx)(n.li,{children:"Gantral does not inspect or interpret tool calls"}),"\n",(0,r.jsx)(n.li,{children:"Execution authority is governed solely by execution state transitions and human decisions"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"17-final-principle",children:"17. Final Principle"}),"\n",(0,r.jsx)(n.p,{children:"Gantral is not about what AI can do."}),"\n",(0,r.jsxs)(n.p,{children:["It is about what organizations are willing to ",(0,r.jsx)(n.strong,{children:"allow AI to do \u2014 and how they prove it"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"This document is the reference."})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);