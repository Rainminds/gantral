"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[4977],{6989(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"architecture/implementation-guide","title":"Comprehensive Implementation Guide","description":"Version: v4.0 (Authority-First, Federated Execution, Agent-Native Persistence)","source":"@site/../docs/architecture/implementation-guide.md","sourceDirName":"architecture","slug":"/architecture/implementation-guide","permalink":"/architecture/implementation-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/Rainminds/gantral/tree/main/../docs/architecture/implementation-guide.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Execution Plane","permalink":"/architecture/execution-plane"},"next":{"title":"Architectural Invariants","permalink":"/architecture/invariants"}}');var r=i(4848),t=i(8453);const l={},d="Comprehensive Implementation Guide",o={},c=[{value:"<strong>Purpose</strong>",id:"purpose",level:2},{value:"<strong>0. How This Guide Should Be Used</strong>",id:"0-how-this-guide-should-be-used",level:2},{value:"<strong>0.1 Documentation Hierarchy (Non-Negotiable)</strong>",id:"01-documentation-hierarchy-non-negotiable",level:3},{value:"<strong>1. System Responsibilities (Explicit)</strong>",id:"1-system-responsibilities-explicit",level:2},{value:"<strong>1.1 What Gantral Owns</strong>",id:"11-what-gantral-owns",level:3},{value:"<strong>1.2 What Gantral Explicitly Does NOT Own</strong>",id:"12-what-gantral-explicitly-does-not-own",level:3},{value:"<strong>2. Separation of Duties (Enterprise Requirement)</strong>",id:"2-separation-of-duties-enterprise-requirement",level:2},{value:"<strong>3. Execution Engine (Phase 1)</strong>",id:"3-execution-engine-phase-1",level:2},{value:"<strong>Responsibility</strong>",id:"responsibility",level:3},{value:"<strong>Canonical States</strong>",id:"canonical-states",level:3},{value:"<strong>Implementation Guidance</strong>",id:"implementation-guidance",level:3},{value:"<strong>4. HITL State Machine (Phase 1)</strong>",id:"4-hitl-state-machine-phase-1",level:2},{value:"<strong>Responsibility</strong>",id:"responsibility-1",level:3},{value:"<strong>Required Guarantees</strong>",id:"required-guarantees",level:3},{value:"<strong>Override Semantics (Critical)</strong>",id:"override-semantics-critical",level:3},{value:"<strong>Timeout Handling (Critical)</strong>",id:"timeout-handling-critical",level:3},{value:"<strong>5. Policy Evaluation Layer (Phase 2)</strong>",id:"5-policy-evaluation-layer-phase-2",level:2},{value:"<strong>Core Principle</strong>",id:"core-principle",level:3},{value:"<strong>When It Runs</strong>",id:"when-it-runs",level:3},{value:"<strong>What It Produces (Advisory Signals)</strong>",id:"what-it-produces-advisory-signals",level:3},{value:"<strong>6. Policy Evaluation Interface (Contract)</strong>",id:"6-policy-evaluation-interface-contract",level:2},{value:"<strong>Input (TRD-Aligned)</strong>",id:"input-trd-aligned",level:3},{value:"<strong>Output (Advisory Only)</strong>",id:"output-advisory-only",level:3},{value:"<strong>7. Execution History, Audit &amp; Replay</strong>",id:"7-execution-history-audit--replay",level:2},{value:"<strong>Responsibility</strong>",id:"responsibility-2",level:3},{value:"<strong>Determinism Model</strong>",id:"determinism-model",level:3},{value:"<strong>8. APIs &amp; SDKs</strong>",id:"8-apis--sdks",level:2},{value:"<strong>API Principles</strong>",id:"api-principles",level:3},{value:"<strong>SDKs</strong>",id:"sdks",level:3},{value:"<strong>9. Adapters &amp; Framework-Native Integrations (Updated)</strong>",id:"9-adapters--framework-native-integrations-updated",level:2},{value:"<strong>Responsibility</strong>",id:"responsibility-3",level:3},{value:"<strong>9.1 Framework-Native Agent Integrations (Critical)</strong>",id:"91-framework-native-agent-integrations-critical",level:3},{value:"<strong>Required Runner / SDK Behavior</strong>",id:"required-runner--sdk-behavior",level:3},{value:"<strong>Suspension Handling</strong>",id:"suspension-handling",level:3},{value:"<strong>Resume Handling</strong>",id:"resume-handling",level:3},{value:"<strong>10. Security, Identity &amp; Federation</strong>",id:"10-security-identity--federation",level:2},{value:"<strong>10.1 Human Identity</strong>",id:"101-human-identity",level:3},{value:"<strong>10.2 Machine Identity</strong>",id:"102-machine-identity",level:3},{value:"<strong>10.3 Secrets &amp; Connections</strong>",id:"103-secrets--connections",level:3},{value:"<strong>11. Runner Pattern (Federated Execution)</strong>",id:"11-runner-pattern-federated-execution",level:2},{value:"<strong>12. Deployment Model</strong>",id:"12-deployment-model",level:2},{value:"<strong>13. Implementation Phases</strong>",id:"13-implementation-phases",level:2},{value:"<strong>14. What This Guide Protects Against</strong>",id:"14-what-this-guide-protects-against",level:2},{value:"<strong>15. Final Reminder</strong>",id:"15-final-reminder",level:2}];function a(e){const n={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"comprehensive-implementation-guide",children:"Comprehensive Implementation Guide"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Version:"})," v4.0 (Authority-First, Federated Execution, Agent-Native Persistence)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Status:"})," Reference implementation guide (non-normative)"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Audience:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Core contributors"}),"\n",(0,r.jsx)(n.li,{children:"Platform engineers"}),"\n",(0,r.jsx)(n.li,{children:"Enterprise architects (regulated environments)"}),"\n",(0,r.jsx)(n.li,{children:"Security, Risk, and Compliance reviewers"}),"\n",(0,r.jsx)(n.li,{children:"AI coding assistants used for implementation"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"purpose",children:(0,r.jsx)(n.strong,{children:"Purpose"})}),"\n",(0,r.jsxs)(n.p,{children:["This document translates the Gantral ",(0,r.jsx)(n.strong,{children:"PRD"})," and ",(0,r.jsx)(n.strong,{children:"TRD v4"})," into a ",(0,r.jsx)(n.strong,{children:"buildable, implementation-accurate guide"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"This version incorporates the finalized architectural clarification:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Gantral owns ",(0,r.jsx)(n.strong,{children:"execution authority and control state"})]}),"\n",(0,r.jsxs)(n.li,{children:["Agent frameworks own ",(0,r.jsx)(n.strong,{children:"agent internal state and memory"})]}),"\n",(0,r.jsxs)(n.li,{children:["Long-running approvals require ",(0,r.jsx)(n.strong,{children:"agent-native checkpointing"})]}),"\n",(0,r.jsx)(n.li,{children:"Deterministic execution and replay are guaranteed by a workflow runtime (Temporal)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Rule:"})," If this guide conflicts with the TRD, the TRD is correct."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"0-how-this-guide-should-be-used",children:(0,r.jsx)(n.strong,{children:"0. How This Guide Should Be Used"})}),"\n",(0,r.jsx)(n.h3,{id:"01-documentation-hierarchy-non-negotiable",children:(0,r.jsx)(n.strong,{children:"0.1 Documentation Hierarchy (Non-Negotiable)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"PRD \u2192 TRD \u2192 Implementation Guide (this document)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["PRD defines ",(0,r.jsx)(n.em,{children:"why"})," Gantral exists"]}),"\n",(0,r.jsxs)(n.li,{children:["TRD defines ",(0,r.jsx)(n.em,{children:"what must be true"})]}),"\n",(0,r.jsxs)(n.li,{children:["This guide defines ",(0,r.jsx)(n.em,{children:"one correct way to build it"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This guide is replaceable. The TRD is not."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-system-responsibilities-explicit",children:(0,r.jsx)(n.strong,{children:"1. System Responsibilities (Explicit)"})}),"\n",(0,r.jsx)(n.h3,{id:"11-what-gantral-owns",children:(0,r.jsx)(n.strong,{children:"1.1 What Gantral Owns"})}),"\n",(0,r.jsxs)(n.p,{children:["Gantral is an ",(0,r.jsx)(n.strong,{children:"execution authority layer"}),". It owns:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Execution lifecycle and immutable instance boundaries"}),"\n",(0,r.jsx)(n.li,{children:"Canonical execution state machine"}),"\n",(0,r.jsx)(n.li,{children:"Human-in-the-Loop (HITL) enforcement"}),"\n",(0,r.jsx)(n.li,{children:"Authority transitions (approve / reject / override)"}),"\n",(0,r.jsxs)(n.li,{children:["Policy gating as ",(0,r.jsx)(n.strong,{children:"transition guards"})]}),"\n",(0,r.jsx)(n.li,{children:"Time, retries, escalation, and timeout semantics"}),"\n",(0,r.jsx)(n.li,{children:"Instance-level audit correctness"}),"\n",(0,r.jsx)(n.li,{children:"Deterministic replay of execution decisions (via workflow runtime)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"12-what-gantral-explicitly-does-not-own",children:(0,r.jsx)(n.strong,{children:"1.2 What Gantral Explicitly Does NOT Own"})}),"\n",(0,r.jsxs)(n.p,{children:["Gantral does ",(0,r.jsx)(n.strong,{children:"not"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Perform agent reasoning, planning, or cognition"}),"\n",(0,r.jsx)(n.li,{children:"Manage prompts, tools, or agent memory"}),"\n",(0,r.jsx)(n.li,{children:"Persist or serialize agent internal state"}),"\n",(0,r.jsx)(n.li,{children:"Decide outcomes autonomously"}),"\n",(0,r.jsx)(n.li,{children:"Store secrets or credentials"}),"\n",(0,r.jsx)(n.li,{children:"Act as an identity provider"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral governs ",(0,r.jsx)(n.strong,{children:"whether execution may proceed"}),", not ",(0,r.jsx)(n.strong,{children:"how agents reason"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-separation-of-duties-enterprise-requirement",children:(0,r.jsx)(n.strong,{children:"2. Separation of Duties (Enterprise Requirement)"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Function"}),(0,r.jsx)(n.th,{children:"Owner"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Agent reasoning & memory"}),(0,r.jsx)(n.td,{children:"Agent frameworks (CrewAI, LangGraph, etc.)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Agent execution"}),(0,r.jsx)(n.td,{children:"Runners"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Agent checkpointing"}),(0,r.jsx)(n.td,{children:"Agent frameworks (native persistence)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Policy authoring"}),(0,r.jsx)(n.td,{children:"Platform / Risk / Compliance"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Policy evaluation"}),(0,r.jsx)(n.td,{children:"Pluggable policy engine"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Execution control"}),(0,r.jsx)(n.td,{children:"Gantral"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Approval decisions"}),(0,r.jsx)(n.td,{children:"Humans"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Audit & review"}),(0,r.jsx)(n.td,{children:"Independent audit teams"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"No component may cross these boundaries."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-execution-engine-phase-1",children:(0,r.jsx)(n.strong,{children:"3. Execution Engine (Phase 1)"})}),"\n",(0,r.jsx)(n.h3,{id:"responsibility",children:(0,r.jsx)(n.strong,{children:"Responsibility"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enforce canonical execution states"}),"\n",(0,r.jsx)(n.li,{children:"Persist immutable execution events"}),"\n",(0,r.jsx)(n.li,{children:"Reject invalid or out-of-order transitions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"canonical-states",children:(0,r.jsx)(n.strong,{children:"Canonical States"})}),"\n",(0,r.jsxs)(n.p,{children:["CREATED \u2192 RUNNING \u2192 WAITING_FOR_HUMAN \u2192 APPROVED | REJECTED | OVERRIDDEN",(0,r.jsx)(n.br,{}),"\n","\u2193                    \u2193",(0,r.jsx)(n.br,{}),"\n","RESUMED             TERMINATED \u2192 COMPLETED"]}),"\n",(0,r.jsx)(n.h3,{id:"implementation-guidance",children:(0,r.jsx)(n.strong,{children:"Implementation Guidance"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Event-sourced execution model"}),"\n",(0,r.jsx)(n.li,{children:"Append-only execution history"}),"\n",(0,r.jsx)(n.li,{children:"Idempotent transition handlers"}),"\n",(0,r.jsx)(n.li,{children:"No implicit or hidden state mutation"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"AI assistant instruction:"})," Implement the state machine exactly as specified. Do not add states."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-hitl-state-machine-phase-1",children:(0,r.jsx)(n.strong,{children:"4. HITL State Machine (Phase 1)"})}),"\n",(0,r.jsx)(n.h3,{id:"responsibility-1",children:(0,r.jsx)(n.strong,{children:"Responsibility"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Encode human authority as an execution state"}),"\n",(0,r.jsx)(n.li,{children:"Prevent agents from resuming execution autonomously"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"required-guarantees",children:(0,r.jsx)(n.strong,{children:"Required Guarantees"})}),"\n",(0,r.jsx)(n.p,{children:"Each HITL decision must capture:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"human_actor_id"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"role"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"timestamp"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"decision"})," (APPROVE / REJECT / OVERRIDE)"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"context_snapshot"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"justification"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"override-semantics-critical",children:(0,r.jsx)(n.strong,{children:"Override Semantics (Critical)"})}),"\n",(0,r.jsx)(n.p,{children:"For OVERRIDDEN (and optionally APPROVED) decisions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"context_delta"})," or equivalent override payload is mandatory"]}),"\n",(0,r.jsx)(n.li,{children:"Execution resumes only with modified context"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"timeout-handling-critical",children:(0,r.jsx)(n.strong,{children:"Timeout Handling (Critical)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"HITL waits are subject to policy-defined timeouts"}),"\n",(0,r.jsxs)(n.li,{children:["On timeout expiry:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Emit a TIMEOUT execution event"}),"\n",(0,r.jsx)(n.li,{children:"Apply policy-defined behavior (fail-closed or escalate)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Timeout handling is execution control, not policy evaluation."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-policy-evaluation-layer-phase-2",children:(0,r.jsx)(n.strong,{children:"5. Policy Evaluation Layer (Phase 2)"})}),"\n",(0,r.jsx)(n.h3,{id:"core-principle",children:(0,r.jsx)(n.strong,{children:"Core Principle"})}),"\n",(0,r.jsxs)(n.p,{children:["Policy evaluation is a ",(0,r.jsx)(n.strong,{children:"transition guard"}),", not an execution state and not an authority."]}),"\n",(0,r.jsx)(n.h3,{id:"when-it-runs",children:(0,r.jsx)(n.strong,{children:"When It Runs"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Synchronously during execution transitions"}),"\n",(0,r.jsxs)(n.li,{children:["Before entering ",(0,r.jsx)(n.code,{children:"WAITING_FOR_HUMAN"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"what-it-produces-advisory-signals",children:(0,r.jsx)(n.strong,{children:"What It Produces (Advisory Signals)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ALLOW"}),"\n",(0,r.jsx)(n.li,{children:"REQUIRE_HUMAN"}),"\n",(0,r.jsx)(n.li,{children:"DENY"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Policy results are ",(0,r.jsx)(n.strong,{children:"never persisted as durable execution state"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-policy-evaluation-interface-contract",children:(0,r.jsx)(n.strong,{children:"6. Policy Evaluation Interface (Contract)"})}),"\n",(0,r.jsx)(n.h3,{id:"input-trd-aligned",children:(0,r.jsx)(n.strong,{children:"Input (TRD-Aligned)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"instance_id"}),"\n",(0,r.jsx)(n.li,{children:"workflow_id"}),"\n",(0,r.jsx)(n.li,{children:"workflow_version"}),"\n",(0,r.jsx)(n.li,{children:"materiality"}),"\n",(0,r.jsx)(n.li,{children:"current_state"}),"\n",(0,r.jsx)(n.li,{children:"actor_id"}),"\n",(0,r.jsx)(n.li,{children:"roles"}),"\n",(0,r.jsx)(n.li,{children:"execution_context"}),"\n",(0,r.jsx)(n.li,{children:"policy_version_id"}),"\n",(0,r.jsx)(n.li,{children:"dry_run"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"output-advisory-only",children:(0,r.jsx)(n.strong,{children:"Output (Advisory Only)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"decision (ALLOW / REQUIRE_HUMAN / DENY)"}),"\n",(0,r.jsx)(n.li,{children:"eligible_approver_roles"}),"\n",(0,r.jsx)(n.li,{children:"escalation_roles"}),"\n",(0,r.jsx)(n.li,{children:"timeout"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral remains the ",(0,r.jsx)(n.strong,{children:"sole enforcement authority"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-execution-history-audit--replay",children:(0,r.jsx)(n.strong,{children:"7. Execution History, Audit & Replay"})}),"\n",(0,r.jsx)(n.h3,{id:"responsibility-2",children:(0,r.jsx)(n.strong,{children:"Responsibility"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Store authoritative execution records"}),"\n",(0,r.jsxs)(n.li,{children:["Enable deterministic replay of ",(0,r.jsx)(n.strong,{children:"authority decisions"})]}),"\n",(0,r.jsx)(n.li,{children:"Support regulatory audits"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"determinism-model",children:(0,r.jsx)(n.strong,{children:"Determinism Model"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Gantral workflows execute inside a deterministic workflow runtime (Temporal)"}),"\n",(0,r.jsx)(n.li,{children:"Replay re-executes workflow logic from recorded execution history"}),"\n",(0,r.jsxs)(n.li,{children:["Replay does ",(0,r.jsx)(n.strong,{children:"not"})," rehydrate agent internal memory"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Agent memory replay is optional and non-authoritative."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-apis--sdks",children:(0,r.jsx)(n.strong,{children:"8. APIs & SDKs"})}),"\n",(0,r.jsx)(n.h3,{id:"api-principles",children:(0,r.jsx)(n.strong,{children:"API Principles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Explicit state transitions"}),"\n",(0,r.jsx)(n.li,{children:"Versioned endpoints"}),"\n",(0,r.jsx)(n.li,{children:"No implicit side effects"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"sdks",children:(0,r.jsx)(n.strong,{children:"SDKs"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Thin wrappers only"}),"\n",(0,r.jsx)(n.li,{children:"No business logic"}),"\n",(0,r.jsx)(n.li,{children:"Server remains the source of truth"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-adapters--framework-native-integrations-updated",children:(0,r.jsx)(n.strong,{children:"9. Adapters & Framework-Native Integrations (Updated)"})}),"\n",(0,r.jsx)(n.h3,{id:"responsibility-3",children:(0,r.jsx)(n.strong,{children:"Responsibility"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Translate external events into Gantral triggers"}),"\n",(0,r.jsx)(n.li,{children:"Forward execution decisions back to external systems"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Adapters contain ",(0,r.jsx)(n.strong,{children:"no business logic, no policy checks, and no execution authority"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"91-framework-native-agent-integrations-critical",children:(0,r.jsx)(n.strong,{children:"9.1 Framework-Native Agent Integrations (Critical)"})}),"\n",(0,r.jsxs)(n.p,{children:["Runners and SDKs ",(0,r.jsx)(n.strong,{children:"must support agent-native suspension and resume semantics"}),"."]}),"\n",(0,r.jsx)(n.p,{children:'Agent frameworks may deliberately suspend execution ("hibernation") when:'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A HITL approval is required"}),"\n",(0,r.jsx)(n.li,{children:"Execution must pause for an extended duration"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"required-runner--sdk-behavior",children:(0,r.jsx)(n.strong,{children:"Required Runner / SDK Behavior"})}),"\n",(0,r.jsxs)(n.p,{children:["The SDK ",(0,r.jsx)(n.strong,{children:"must distinguish"})," between:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Agent Outcome"}),(0,r.jsx)(n.th,{children:"Meaning"}),(0,r.jsx)(n.th,{children:"Gantral Action"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Completed"}),(0,r.jsx)(n.td,{children:"Agent finished normally"}),(0,r.jsx)(n.td,{children:"Transition to COMPLETED"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Failed"}),(0,r.jsx)(n.td,{children:"Agent crashed or errored"}),(0,r.jsx)(n.td,{children:"Transition to TERMINATED"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Suspended"}),(0,r.jsx)(n.td,{children:"Agent checkpointed and exited"}),(0,r.jsx)(n.td,{children:"Transition to WAITING_FOR_HUMAN"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"suspension-handling",children:(0,r.jsx)(n.strong,{children:"Suspension Handling"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Agent framework persists internal state using its ",(0,r.jsx)(n.strong,{children:"native checkpointing"})]}),"\n",(0,r.jsx)(n.li,{children:"Agent process exits cleanly"}),"\n",(0,r.jsxs)(n.li,{children:["Runner emits a ",(0,r.jsx)(n.strong,{children:"SUSPENDED"})," execution event"]}),"\n",(0,r.jsx)(n.li,{children:"Gantral workflow waits on approval signal"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"resume-handling",children:(0,r.jsx)(n.strong,{children:"Resume Handling"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Upon APPROVED / OVERRIDDEN:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Gantral schedules a new execution task"}),"\n",(0,r.jsxs)(n.li,{children:["Runner launches a ",(0,r.jsx)(n.strong,{children:"new agent process"})]}),"\n",(0,r.jsx)(n.li,{children:"Agent framework restores state from checkpoint"}),"\n",(0,r.jsx)(n.li,{children:"Execution resumes deterministically"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Gantral never loads, inspects, or persists agent internal state."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"10-security-identity--federation",children:(0,r.jsx)(n.strong,{children:"10. Security, Identity & Federation"})}),"\n",(0,r.jsx)(n.h3,{id:"101-human-identity",children:(0,r.jsx)(n.strong,{children:"10.1 Human Identity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"OIDC federation only (Okta, Azure AD, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Identity derived from token claims"}),"\n",(0,r.jsx)(n.li,{children:"No Gantral-managed users"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"102-machine-identity",children:(0,r.jsx)(n.strong,{children:"10.2 Machine Identity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Workload identity (AWS IAM, K8s SA, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"No static API keys"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"103-secrets--connections",children:(0,r.jsx)(n.strong,{children:"10.3 Secrets & Connections"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Gantral stores references only (e.g. ",(0,r.jsx)(n.code,{children:"vault://..."}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Secrets resolved by Runners at execution edge"}),"\n",(0,r.jsx)(n.li,{children:"Raw credentials never enter Gantral"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"11-runner-pattern-federated-execution",children:(0,r.jsx)(n.strong,{children:"11. Runner Pattern (Federated Execution)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Runners execute inside team-owned infrastructure"}),"\n",(0,r.jsx)(n.li,{children:"Pull-based task queues"}),"\n",(0,r.jsx)(n.li,{children:"Data locality preserved"}),"\n",(0,r.jsx)(n.li,{children:"Network isolation respected"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Gantral is the ",(0,r.jsx)(n.strong,{children:"authority"}),". Runners are the ",(0,r.jsx)(n.strong,{children:"executors"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"12-deployment-model",children:(0,r.jsx)(n.strong,{children:"12. Deployment Model"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Kubernetes (primary)"}),"\n",(0,r.jsx)(n.li,{children:"Self-hosted"}),"\n",(0,r.jsx)(n.li,{children:"Air-gapped deployments supported"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"13-implementation-phases",children:(0,r.jsx)(n.strong,{children:"13. Implementation Phases"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Phase 1 \u2013 Control Foundations"}),"\n",(0,r.jsx)(n.li,{children:"Phase 2 \u2013 Governance Hardening"}),"\n",(0,r.jsx)(n.li,{children:"Phase 3 \u2013 Enterprise Integration"}),"\n",(0,r.jsx)(n.li,{children:"Phase 4 \u2013 Federated Execution"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Phases must be completed ",(0,r.jsx)(n.strong,{children:"strictly in order"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"14-what-this-guide-protects-against",children:(0,r.jsx)(n.strong,{children:"14. What This Guide Protects Against"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Accidental autonomy"}),"\n",(0,r.jsx)(n.li,{children:"Agent memory leakage into audit logs"}),"\n",(0,r.jsx)(n.li,{children:"Non-deterministic approvals"}),"\n",(0,r.jsx)(n.li,{children:"Regulator rejection"}),"\n",(0,r.jsx)(n.li,{children:"Framework lock-in"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"15-final-reminder",children:(0,r.jsx)(n.strong,{children:"15. Final Reminder"})}),"\n",(0,r.jsx)(n.p,{children:"Gantral is not about what AI can do."}),"\n",(0,r.jsx)(n.p,{children:"It is about what organizations are willing to allow AI to do \u2014 and how they prove it."}),"\n",(0,r.jsxs)(n.p,{children:["This guide exists to ensure Gantral is built ",(0,r.jsx)(n.strong,{children:"correctly, safely, and credibly"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>d});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);