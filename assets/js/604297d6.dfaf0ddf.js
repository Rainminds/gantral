"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[4977],{6989(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"architecture/implementation-guide","title":"Implementation Guide","description":"Version: v4.1 (Authority-First, Federated Execution, Atomic Commit)","source":"@site/../docs/architecture/implementation-guide.md","sourceDirName":"architecture","slug":"/architecture/implementation-guide","permalink":"/architecture/implementation-guide","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Implementation Guide"},"sidebar":"docsSidebar","previous":{"title":"Execution Authority vs Agent Memory vs Runtime","permalink":"/architecture/execution-authority-vs-agent-memory"},"next":{"title":"Policy vs Authority","permalink":"/governance/policy-vs-authority"}}');var s=n(4848),r=n(8453);const l={title:"Implementation Guide"},d="Comprehensive Implementation Guide",c={},o=[{value:"Purpose",id:"purpose",level:2},{value:"0. How This Guide Should Be Used",id:"0-how-this-guide-should-be-used",level:2},{value:"0.1 Documentation Hierarchy (Non-Negotiable)",id:"01-documentation-hierarchy-non-negotiable",level:3},{value:"1. System Responsibilities (Explicit)",id:"1-system-responsibilities-explicit",level:2},{value:"1.1 What Gantral Owns",id:"11-what-gantral-owns",level:3},{value:"1.2 What Gantral Explicitly Does NOT Own",id:"12-what-gantral-explicitly-does-not-own",level:3},{value:"2. Separation of Duties (Enterprise Requirement)",id:"2-separation-of-duties-enterprise-requirement",level:2},{value:"3. Execution Engine (Phase 1)",id:"3-execution-engine-phase-1",level:2},{value:"Responsibility",id:"responsibility",level:3},{value:"Canonical States",id:"canonical-states",level:3},{value:"Implementation Guidance",id:"implementation-guidance",level:3},{value:"4. HITL State Machine (Phase 1)",id:"4-hitl-state-machine-phase-1",level:2},{value:"Responsibility",id:"responsibility-1",level:3},{value:"Required Guarantees",id:"required-guarantees",level:3},{value:"Override Semantics (Critical)",id:"override-semantics-critical",level:3},{value:"Timeout Handling (Critical)",id:"timeout-handling-critical",level:3},{value:"5. Policy Evaluation Layer (Phase 2)",id:"5-policy-evaluation-layer-phase-2",level:2},{value:"Core Principle",id:"core-principle",level:3},{value:"When It Runs",id:"when-it-runs",level:3},{value:"What It Produces (Advisory Signals)",id:"what-it-produces-advisory-signals",level:3},{value:"6. Failure Modes and Atomicity (Critical)",id:"6-failure-modes-and-atomicity-critical",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"6.1 Atomic Authority Commit",id:"61-atomic-authority-commit",level:3},{value:"6.2 Execution-Time Failure Modes",id:"62-execution-time-failure-modes",level:3},{value:"6.3 Artifact Emission Failures",id:"63-artifact-emission-failures",level:3},{value:"6.4 Replay-Oriented Failure Semantics",id:"64-replay-oriented-failure-semantics",level:3},{value:"6.5 No Best-Effort Execution",id:"65-no-best-effort-execution",level:3},{value:"7. Policy Evaluation Interface (Contract)",id:"7-policy-evaluation-interface-contract",level:2},{value:"Input (TRD-Aligned)",id:"input-trd-aligned",level:3},{value:"Output (Advisory Only)",id:"output-advisory-only",level:3},{value:"8. Execution History, Audit &amp; Replay",id:"8-execution-history-audit--replay",level:2},{value:"Responsibility",id:"responsibility-2",level:3},{value:"Determinism Model",id:"determinism-model",level:3},{value:"9. APIs &amp; SDKs",id:"9-apis--sdks",level:2},{value:"API Principles",id:"api-principles",level:3},{value:"SDKs",id:"sdks",level:3},{value:"10. Adapters &amp; Framework-Native Integrations",id:"10-adapters--framework-native-integrations",level:2},{value:"Responsibility",id:"responsibility-3",level:3},{value:"10.1 Framework-Native Agent Integrations (Critical)",id:"101-framework-native-agent-integrations-critical",level:3},{value:"11. Security, Identity &amp; Federation",id:"11-security-identity--federation",level:2},{value:"11.1 Human Identity",id:"111-human-identity",level:3},{value:"11.2 Machine Identity",id:"112-machine-identity",level:3},{value:"12. Runner Pattern (Federated Execution)",id:"12-runner-pattern-federated-execution",level:2},{value:"13. Deployment Model",id:"13-deployment-model",level:2},{value:"14. Implementation Phases",id:"14-implementation-phases",level:2},{value:"15. What This Guide Protects Against",id:"15-what-this-guide-protects-against",level:2},{value:"16. Final Reminder",id:"16-final-reminder",level:2}];function a(e){const i={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"comprehensive-implementation-guide",children:"Comprehensive Implementation Guide"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Version:"})," v4.1 (Authority-First, Federated Execution, Atomic Commit)",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Status:"})," Reference implementation guide (non-normative)",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Audience:"})," Core contributors, platform engineers, enterprise architects (regulated environments), security / risk / compliance reviewers, AI coding assistants"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"purpose",children:"Purpose"}),"\n",(0,s.jsxs)(i.p,{children:["This document translates the ",(0,s.jsx)(i.strong,{children:"Gantral PRD v5.1"})," and ",(0,s.jsx)(i.strong,{children:"TRD v4.1"})," into a ",(0,s.jsx)(i.strong,{children:"buildable, implementation-accurate guide"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"It incorporates finalized architectural clarifications:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Gantral owns ",(0,s.jsx)(i.strong,{children:"execution authority and control state"})]}),"\n",(0,s.jsxs)(i.li,{children:["Agent frameworks own ",(0,s.jsx)(i.strong,{children:"agent internal state and memory"})]}),"\n",(0,s.jsxs)(i.li,{children:["Long-running approvals require ",(0,s.jsx)(i.strong,{children:"agent-native checkpointing"})]}),"\n",(0,s.jsxs)(i.li,{children:["Deterministic execution and replay are guaranteed by a ",(0,s.jsx)(i.strong,{children:"workflow runtime (e.g. Temporal)"})]}),"\n",(0,s.jsxs)(i.li,{children:["Authority enforcement is ",(0,s.jsx)(i.strong,{children:"atomic with evidence emission"})]}),"\n",(0,s.jsxs)(i.li,{children:["Execution instances are ",(0,s.jsx)(i.strong,{children:"explicitly owned and governed"})," (team + policy binding)"]}),"\n"]}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Rule:"})," If this guide conflicts with the TRD, the TRD is correct."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"0-how-this-guide-should-be-used",children:"0. How This Guide Should Be Used"}),"\n",(0,s.jsx)(i.h3,{id:"01-documentation-hierarchy-non-negotiable",children:"0.1 Documentation Hierarchy (Non-Negotiable)"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"\nPRD \u2192 TRD \u2192 Implementation Guide (this document)\n\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["PRD defines ",(0,s.jsx)(i.strong,{children:"why"})," Gantral exists"]}),"\n",(0,s.jsxs)(i.li,{children:["TRD defines ",(0,s.jsx)(i.strong,{children:"what must be true"})]}),"\n",(0,s.jsxs)(i.li,{children:["This guide defines ",(0,s.jsx)(i.strong,{children:"one correct way to build it"})]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["This guide is replaceable.",(0,s.jsx)(i.br,{}),"\n","The TRD is not."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"1-system-responsibilities-explicit",children:"1. System Responsibilities (Explicit)"}),"\n",(0,s.jsx)(i.h3,{id:"11-what-gantral-owns",children:"1.1 What Gantral Owns"}),"\n",(0,s.jsxs)(i.p,{children:["Gantral is an ",(0,s.jsx)(i.strong,{children:"execution authority layer"}),". It owns:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Execution lifecycle and immutable execution instance boundaries"}),"\n",(0,s.jsxs)(i.li,{children:["Canonical ",(0,s.jsx)(i.strong,{children:"authority state machine"})]}),"\n",(0,s.jsx)(i.li,{children:"Human-in-the-Loop (HITL) enforcement"}),"\n",(0,s.jsx)(i.li,{children:"Authority transitions (APPROVE / REJECT / OVERRIDE)"}),"\n",(0,s.jsxs)(i.li,{children:["Policy gating as ",(0,s.jsx)(i.strong,{children:"transition guards"})]}),"\n",(0,s.jsx)(i.li,{children:"Time, retries, escalation, and timeout semantics"}),"\n",(0,s.jsx)(i.li,{children:"Instance-level audit correctness"}),"\n",(0,s.jsx)(i.li,{children:"Deterministic replay of authority decisions (via workflow runtime)"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Commitment artifact emission"})," at authority boundaries"]}),"\n",(0,s.jsxs)(i.li,{children:["Binding of execution instances to ",(0,s.jsx)(i.strong,{children:"owning team and applicable policy set"})]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"12-what-gantral-explicitly-does-not-own",children:"1.2 What Gantral Explicitly Does NOT Own"}),"\n",(0,s.jsxs)(i.p,{children:["Gantral does ",(0,s.jsx)(i.strong,{children:"not"}),":"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Perform agent reasoning, planning, or cognition"}),"\n",(0,s.jsx)(i.li,{children:"Manage prompts, tools, or agent memory"}),"\n",(0,s.jsx)(i.li,{children:"Persist or serialize agent internal state"}),"\n",(0,s.jsx)(i.li,{children:"Decide outcomes autonomously"}),"\n",(0,s.jsx)(i.li,{children:"Store secrets or credentials"}),"\n",(0,s.jsx)(i.li,{children:"Act as an identity provider"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Gantral governs ",(0,s.jsx)(i.strong,{children:"whether execution may proceed"}),", not ",(0,s.jsx)(i.strong,{children:"how agents reason"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"2-separation-of-duties-enterprise-requirement",children:"2. Separation of Duties (Enterprise Requirement)"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Function"}),(0,s.jsx)(i.th,{children:"Owner"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Agent reasoning & memory"}),(0,s.jsx)(i.td,{children:"Agent frameworks (CrewAI, LangGraph, etc.)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Agent execution"}),(0,s.jsx)(i.td,{children:"Runners"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Agent checkpointing"}),(0,s.jsx)(i.td,{children:"Agent frameworks (native persistence)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Policy authoring"}),(0,s.jsx)(i.td,{children:"Platform / Risk / Compliance"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Policy evaluation"}),(0,s.jsx)(i.td,{children:"Pluggable policy engine"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Execution control"}),(0,s.jsx)(i.td,{children:"Gantral"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Approval decisions"}),(0,s.jsx)(i.td,{children:"Humans"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Audit & review"}),(0,s.jsx)(i.td,{children:"Independent audit teams"})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"No component may cross these boundaries."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"3-execution-engine-phase-1",children:"3. Execution Engine (Phase 1)"}),"\n",(0,s.jsx)(i.h3,{id:"responsibility",children:"Responsibility"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Enforce canonical authority states"}),"\n",(0,s.jsx)(i.li,{children:"Persist immutable execution events"}),"\n",(0,s.jsx)(i.li,{children:"Reject invalid or out-of-order transitions"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"canonical-states",children:"Canonical States"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"\nCREATED \u2192 RUNNING \u2192 WAITING_FOR_HUMAN \u2192 APPROVED | REJECTED | OVERRIDDEN\n\u2193                \u2193\nRESUMED         TERMINATED \u2192 COMPLETED\n\n"})}),"\n",(0,s.jsx)(i.h3,{id:"implementation-guidance",children:"Implementation Guidance"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Event-sourced execution model"}),"\n",(0,s.jsx)(i.li,{children:"Append-only execution history"}),"\n",(0,s.jsx)(i.li,{children:"Idempotent transition handlers"}),"\n",(0,s.jsx)(i.li,{children:"No implicit or hidden state mutation"}),"\n"]}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"AI assistant instruction:"})," Implement the state machine exactly as specified. Do not add states."]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"4-hitl-state-machine-phase-1",children:"4. HITL State Machine (Phase 1)"}),"\n",(0,s.jsx)(i.h3,{id:"responsibility-1",children:"Responsibility"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Encode human authority as an execution state"}),"\n",(0,s.jsx)(i.li,{children:"Prevent agents from resuming execution autonomously"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"required-guarantees",children:"Required Guarantees"}),"\n",(0,s.jsx)(i.p,{children:"Each HITL decision must capture:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"human_actor_id"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"role"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"timestamp"})}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"decision"})," (APPROVE / REJECT / OVERRIDE)"]}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"context_snapshot"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"justification"})}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"override-semantics-critical",children:"Override Semantics (Critical)"}),"\n",(0,s.jsxs)(i.p,{children:["For ",(0,s.jsx)(i.strong,{children:"OVERRIDDEN"})," (and optionally APPROVED) decisions:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"context_delta"})," (or equivalent override payload) is mandatory"]}),"\n",(0,s.jsxs)(i.li,{children:["Execution resumes ",(0,s.jsx)(i.strong,{children:"only"})," with modified context"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"timeout-handling-critical",children:"Timeout Handling (Critical)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"HITL waits are subject to policy-defined timeouts"}),"\n",(0,s.jsxs)(i.li,{children:["On timeout expiry:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["Emit a ",(0,s.jsx)(i.code,{children:"TIMEOUT"})," execution event"]}),"\n",(0,s.jsx)(i.li,{children:"Apply policy-defined behavior (fail-closed or escalate)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Timeout handling is ",(0,s.jsx)(i.strong,{children:"execution control"}),", not policy evaluation."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"5-policy-evaluation-layer-phase-2",children:"5. Policy Evaluation Layer (Phase 2)"}),"\n",(0,s.jsx)(i.h3,{id:"core-principle",children:"Core Principle"}),"\n",(0,s.jsxs)(i.p,{children:["Policy evaluation is a ",(0,s.jsx)(i.strong,{children:"transition guard"}),", not an execution state and not an authority."]}),"\n",(0,s.jsx)(i.h3,{id:"when-it-runs",children:"When It Runs"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Synchronously during execution transitions"}),"\n",(0,s.jsxs)(i.li,{children:["Before entering ",(0,s.jsx)(i.code,{children:"WAITING_FOR_HUMAN"})]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"what-it-produces-advisory-signals",children:"What It Produces (Advisory Signals)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"ALLOW"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"REQUIRE_HUMAN"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"DENY"})}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Policy results are ",(0,s.jsx)(i.strong,{children:"never persisted"})," as durable execution state."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"6-failure-modes-and-atomicity-critical",children:"6. Failure Modes and Atomicity (Critical)"}),"\n",(0,s.jsx)(i.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,s.jsxs)(i.p,{children:["This section defines ",(0,s.jsx)(i.strong,{children:"when execution must stop"}),", ",(0,s.jsx)(i.strong,{children:"when evidence must not be emitted"}),", and ",(0,s.jsx)(i.strong,{children:"how atomicity is enforced"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["Gantral prefers ",(0,s.jsx)(i.strong,{children:"failure over ambiguity"}),".",(0,s.jsx)(i.br,{}),"\n","Execution must never proceed if authority cannot be ",(0,s.jsx)(i.strong,{children:"enforced and proven atomically"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"61-atomic-authority-commit",children:"6.1 Atomic Authority Commit"}),"\n",(0,s.jsxs)(i.p,{children:["An authority transition is valid ",(0,s.jsx)(i.strong,{children:"only if"})," all of the following occur atomically:"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Authority decision is evaluated"}),"\n",(0,s.jsx)(i.li,{children:"Execution state transition is committed"}),"\n",(0,s.jsx)(i.li,{children:"Commitment artifact is emitted and durably persisted"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"These steps are inseparable."}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Rule:"}),(0,s.jsx)(i.br,{}),"\n","If a commitment artifact cannot be emitted, the execution transition ",(0,s.jsx)(i.strong,{children:"must not occur"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"No artifact \u2192 no execution."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"62-execution-time-failure-modes",children:"6.2 Execution-Time Failure Modes"}),"\n",(0,s.jsx)(i.p,{children:"Gantral must refuse or terminate execution when:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Authority state is ambiguous"}),"\n",(0,s.jsx)(i.li,{children:"Required human authority is unavailable"}),"\n",(0,s.jsx)(i.li,{children:"Policy evaluation produces conflicting signals"}),"\n",(0,s.jsx)(i.li,{children:"HITL timeout expires without resolution"}),"\n",(0,s.jsx)(i.li,{children:"Execution transition is invalid or out of order"}),"\n",(0,s.jsx)(i.li,{children:"Commitment artifact emission fails"}),"\n",(0,s.jsx)(i.li,{children:"Persistence guarantees cannot be met"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Failure to proceed is ",(0,s.jsx)(i.strong,{children:"correct behavior"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"63-artifact-emission-failures",children:"6.3 Artifact Emission Failures"}),"\n",(0,s.jsx)(i.p,{children:"If artifact emission fails due to:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Storage unavailability"}),"\n",(0,s.jsx)(i.li,{children:"Integrity binding failure"}),"\n",(0,s.jsx)(i.li,{children:"Partial write or timeout"}),"\n",(0,s.jsx)(i.li,{children:"Workflow runtime error"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Gantral must:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Abort the execution transition"}),"\n",(0,s.jsxs)(i.li,{children:["Mark the instance as ",(0,s.jsx)(i.code,{children:"TERMINATED"})]}),"\n",(0,s.jsx)(i.li,{children:"Surface the failure explicitly"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Execution must never continue optimistically."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"64-replay-oriented-failure-semantics",children:"6.4 Replay-Oriented Failure Semantics"}),"\n",(0,s.jsxs)(i.p,{children:["Failure modes are designed to support ",(0,s.jsx)(i.strong,{children:"hostile replay"}),":"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Condition"}),(0,s.jsx)(i.th,{children:"Replay Outcome"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Missing artifact"}),(0,s.jsx)(i.td,{children:"INCONCLUSIVE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Altered artifact"}),(0,s.jsx)(i.td,{children:"INVALID"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Ambiguous authority"}),(0,s.jsx)(i.td,{children:"INCONCLUSIVE"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Invalid transition"}),(0,s.jsx)(i.td,{children:"INVALID"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:["Failures must be ",(0,s.jsx)(i.strong,{children:"detectable during replay"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"65-no-best-effort-execution",children:"6.5 No Best-Effort Execution"}),"\n",(0,s.jsx)(i.p,{children:"Gantral must not:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Retry authority transitions silently"}),"\n",(0,s.jsx)(i.li,{children:"Infer missing authority"}),"\n",(0,s.jsx)(i.li,{children:"Reconstruct approvals from logs"}),"\n",(0,s.jsx)(i.li,{children:"Rely on operator narratives"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Best-effort execution is incompatible with verifiability."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"7-policy-evaluation-interface-contract",children:"7. Policy Evaluation Interface (Contract)"}),"\n",(0,s.jsx)(i.h3,{id:"input-trd-aligned",children:"Input (TRD-Aligned)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"instance_id"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"workflow_id"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"workflow_version"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"materiality"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"current_state"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"actor_id"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"roles"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"execution_context"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"policy_version_id"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"dry_run"})}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"output-advisory-only",children:"Output (Advisory Only)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"decision"})," (ALLOW / REQUIRE_HUMAN / DENY)"]}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"eligible_approver_roles"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"escalation_roles"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.code,{children:"timeout"})}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Gantral remains the ",(0,s.jsx)(i.strong,{children:"sole enforcement authority"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"8-execution-history-audit--replay",children:"8. Execution History, Audit & Replay"}),"\n",(0,s.jsx)(i.h3,{id:"responsibility-2",children:"Responsibility"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Store authoritative execution records"}),"\n",(0,s.jsx)(i.li,{children:"Enable deterministic replay of authority decisions"}),"\n",(0,s.jsx)(i.li,{children:"Support regulatory audits"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"determinism-model",children:"Determinism Model"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Gantral workflows execute inside a deterministic workflow runtime"}),"\n",(0,s.jsx)(i.li,{children:"Replay re-executes workflow logic from recorded authority history"}),"\n",(0,s.jsxs)(i.li,{children:["Replay does ",(0,s.jsx)(i.strong,{children:"not"})," rehydrate agent internal memory"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Agent memory replay is optional and ",(0,s.jsx)(i.strong,{children:"non-authoritative"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"9-apis--sdks",children:"9. APIs & SDKs"}),"\n",(0,s.jsx)(i.h3,{id:"api-principles",children:"API Principles"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Explicit state transitions"}),"\n",(0,s.jsx)(i.li,{children:"Versioned endpoints"}),"\n",(0,s.jsx)(i.li,{children:"No implicit side effects"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"sdks",children:"SDKs"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Thin wrappers only"}),"\n",(0,s.jsx)(i.li,{children:"No business logic"}),"\n",(0,s.jsx)(i.li,{children:"Server remains the source of truth"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"10-adapters--framework-native-integrations",children:"10. Adapters & Framework-Native Integrations"}),"\n",(0,s.jsx)(i.h3,{id:"responsibility-3",children:"Responsibility"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Translate external events into Gantral triggers"}),"\n",(0,s.jsx)(i.li,{children:"Forward execution decisions back to external systems"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Adapters contain ",(0,s.jsx)(i.strong,{children:"no business logic"}),", ",(0,s.jsx)(i.strong,{children:"no policy checks"}),", and ",(0,s.jsx)(i.strong,{children:"no execution authority"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"101-framework-native-agent-integrations-critical",children:"10.1 Framework-Native Agent Integrations (Critical)"}),"\n",(0,s.jsxs)(i.p,{children:["Runners and SDKs must support ",(0,s.jsx)(i.strong,{children:"agent-native suspension and resume semantics"}),"."]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Agent Outcome"}),(0,s.jsx)(i.th,{children:"Meaning"}),(0,s.jsx)(i.th,{children:"Gantral Action"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Completed"}),(0,s.jsx)(i.td,{children:"Agent finished normally"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"COMPLETED"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Failed"}),(0,s.jsx)(i.td,{children:"Agent crashed or errored"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"TERMINATED"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Suspended"}),(0,s.jsx)(i.td,{children:"Agent checkpointed and exited"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"WAITING_FOR_HUMAN"})})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"Gantral never loads, inspects, or persists agent internal state."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"11-security-identity--federation",children:"11. Security, Identity & Federation"}),"\n",(0,s.jsx)(i.h3,{id:"111-human-identity",children:"11.1 Human Identity"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"OIDC federation only"}),"\n",(0,s.jsx)(i.li,{children:"Identity derived from token claims"}),"\n",(0,s.jsx)(i.li,{children:"No Gantral-managed users"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"112-machine-identity",children:"11.2 Machine Identity"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Workload identity only"}),"\n",(0,s.jsx)(i.li,{children:"No static API keys"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"12-runner-pattern-federated-execution",children:"12. Runner Pattern (Federated Execution)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Runners execute inside team-owned infrastructure"}),"\n",(0,s.jsx)(i.li,{children:"Pull-based task queues"}),"\n",(0,s.jsx)(i.li,{children:"Data locality preserved"}),"\n",(0,s.jsx)(i.li,{children:"Network isolation respected"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Gantral is the authority. Runners are the executors."})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"13-deployment-model",children:"13. Deployment Model"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Kubernetes (primary)"}),"\n",(0,s.jsx)(i.li,{children:"Self-hosted"}),"\n",(0,s.jsx)(i.li,{children:"Air-gapped supported"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"14-implementation-phases",children:"14. Implementation Phases"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Phase 1 \u2013 Control Foundations"}),"\n",(0,s.jsx)(i.li,{children:"Phase 2 \u2013 Governance Hardening"}),"\n",(0,s.jsx)(i.li,{children:"Phase 3 \u2013 Enterprise Integration"}),"\n",(0,s.jsx)(i.li,{children:"Phase 4 \u2013 Federated Execution"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Phases must be completed ",(0,s.jsx)(i.strong,{children:"strictly in order"}),"."]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"15-what-this-guide-protects-against",children:"15. What This Guide Protects Against"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Accidental autonomy"}),"\n",(0,s.jsx)(i.li,{children:"Agent memory leakage into audit logs"}),"\n",(0,s.jsx)(i.li,{children:"Non-deterministic approvals"}),"\n",(0,s.jsx)(i.li,{children:"Optimistic execution"}),"\n",(0,s.jsx)(i.li,{children:"Regulator rejection"}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"16-final-reminder",children:"16. Final Reminder"}),"\n",(0,s.jsx)(i.p,{children:"Gantral is not about what AI can do."}),"\n",(0,s.jsxs)(i.p,{children:["It is about what organizations are willing to",(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"allow AI to do \u2014 and how they prove it"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["This guide exists to ensure Gantral is built ",(0,s.jsx)(i.strong,{children:"correctly, safely, and credibly"}),"."]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,i,n){n.d(i,{R:()=>l,x:()=>d});var t=n(6540);const s={},r=t.createContext(s);function l(e){const i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);