"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[7833],{3039(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"testing/testing-architecture-blueprint","title":"Testing Architecture Blueprint","description":"Version: v2.0 (Baseline Enforcement Model)","source":"@site/../docs/testing/testing-architecture-blueprint.md","sourceDirName":"testing","slug":"/testing/testing-architecture-blueprint","permalink":"/testing/testing-architecture-blueprint","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Testing Overview","permalink":"/testing/"},"next":{"title":"Exhaustive Master Test Inventory","permalink":"/testing/master-test-inventory"}}');var r=i(4848),s=i(8453);const l={},a="Testing Architecture Blueprint",c={},o=[{value:"<strong>3.1 Tests Enforce Invariants, Not Features</strong>",id:"31-tests-enforce-invariants-not-features",level:2},{value:"<strong>3.2 Tests Must Be:</strong>",id:"32-tests-must-be",level:2},{value:"<strong>Layer 1 \u2013 Pure Deterministic Unit Tests</strong>",id:"layer-1--pure-deterministic-unit-tests",level:2},{value:"<strong>Layer 2 \u2013 Canonical State Machine Matrix Tests</strong>",id:"layer-2--canonical-state-machine-matrix-tests",level:2},{value:"<strong>Authority Exclusivity Enforcement</strong>",id:"authority-exclusivity-enforcement",level:3},{value:"<strong>Layer 3 \u2013 Artifact Integrity &amp; Chain Enforcement</strong>",id:"layer-3--artifact-integrity--chain-enforcement",level:2},{value:"<strong>Storage-Order Independence</strong>",id:"storage-order-independence",level:3},{value:"<strong>Layer 4 \u2013 Replay &amp; Verifier Tests</strong>",id:"layer-4--replay--verifier-tests",level:2},{value:"<strong>CLI Contract Locking</strong>",id:"cli-contract-locking",level:3},{value:"<strong>Layer 5 \u2013 Policy Advisory Boundary Enforcement</strong>",id:"layer-5--policy-advisory-boundary-enforcement",level:2},{value:"<strong>Policy Boundary Guarantees</strong>",id:"policy-boundary-guarantees",level:3},{value:"<strong>Context Snapshot Binding Enforcement</strong>",id:"context-snapshot-binding-enforcement",level:3},{value:"<strong>Layer 6 \u2013 Integration Tests (Runtime + Policy + Storage)</strong>",id:"layer-6--integration-tests-runtime--policy--storage",level:2},{value:"<strong>Storage Authority Boundary Enforcement</strong>",id:"storage-authority-boundary-enforcement",level:3},{value:"<strong>Layer 7 \u2013 Auditor Conformance Tests</strong>",id:"layer-7--auditor-conformance-tests",level:2},{value:"<strong>Layer 8 \u2013 Unified Visibility Tests</strong>",id:"layer-8--unified-visibility-tests",level:2},{value:"<strong>Layer 9 \u2013 Agent Isolation &amp; Memory Boundary Tests</strong>",id:"layer-9--agent-isolation--memory-boundary-tests",level:2}];function d(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"testing-architecture-blueprint",children:"Testing Architecture Blueprint"})}),"\n",(0,r.jsx)(n.p,{children:"Version: v2.0 (Baseline Enforcement Model)"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"1-purpose",children:(0,r.jsx)(n.strong,{children:"1. Purpose"})}),"\n",(0,r.jsx)(n.p,{children:"This document defines the authoritative testing architecture for Gantral."}),"\n",(0,r.jsx)(n.p,{children:"It ensures that:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All architectural invariants are mechanically enforced."}),"\n",(0,r.jsx)(n.li,{children:"Authority exists exclusively as canonical workflow state."}),"\n",(0,r.jsx)(n.li,{children:"Commitment artifacts are cryptographically and structurally enforced."}),"\n",(0,r.jsx)(n.li,{children:"Replay is deterministic and independent of runtime, database, and logs."}),"\n",(0,r.jsx)(n.li,{children:"Policy remains advisory and cannot assume authority."}),"\n",(0,r.jsx)(n.li,{children:"Storage, identity, and federation cannot weaken admissibility."}),"\n",(0,r.jsx)(n.li,{children:"Auditor guarantees are executable, not narrative."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Testing in Gantral is not QA.",(0,r.jsx)(n.br,{}),"\n","It is constitutional enforcement."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"2-constitutional-guarantees",children:(0,r.jsx)(n.strong,{children:"2. Constitutional Guarantees"})}),"\n",(0,r.jsx)(n.p,{children:"Gantral testing must enforce the following guarantees:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Authority is represented exclusively as canonical workflow state."}),"\n",(0,r.jsx)(n.li,{children:"Only explicitly enumerated transitions are valid."}),"\n",(0,r.jsx)(n.li,{children:"Authority transition and artifact emission are atomic."}),"\n",(0,r.jsx)(n.li,{children:"Artifact hash binding is recursive and tamper-evident."}),"\n",(0,r.jsxs)(n.li,{children:["Replay validates:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Hash-chain integrity"}),"\n",(0,r.jsx)(n.li,{children:"Transition validity"}),"\n",(0,r.jsx)(n.li,{children:"workflow_version_id consistency"}),"\n",(0,r.jsx)(n.li,{children:"policy_version_id consistency"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Replay requires no runtime, database, or logs."}),"\n",(0,r.jsx)(n.li,{children:"Policy evaluation is advisory only."}),"\n",(0,r.jsx)(n.li,{children:"Artifact store is authoritative for replay."}),"\n",(0,r.jsx)(n.li,{children:"Identity is verified at decision time."}),"\n",(0,r.jsx)(n.li,{children:"Unified visibility into running and paused workflows exists."}),"\n",(0,r.jsx)(n.li,{children:"Agent memory is never part of authority evidence."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"All test layers must enforce these guarantees."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"3-testing-philosophy-non-negotiable",children:(0,r.jsx)(n.strong,{children:"3. Testing Philosophy (Non-Negotiable)"})}),"\n",(0,r.jsx)(n.h2,{id:"31-tests-enforce-invariants-not-features",children:(0,r.jsx)(n.strong,{children:"3.1 Tests Enforce Invariants, Not Features"})}),"\n",(0,r.jsx)(n.p,{children:"Tests must verify:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Authority is state."}),"\n",(0,r.jsx)(n.li,{children:"HITL is blocking."}),"\n",(0,r.jsx)(n.li,{children:"Policy is advisory only."}),"\n",(0,r.jsx)(n.li,{children:"Artifact emission is atomic."}),"\n",(0,r.jsx)(n.li,{children:"Replay depends only on artifact chain."}),"\n",(0,r.jsx)(n.li,{children:"Fail-closed behavior everywhere."}),"\n",(0,r.jsx)(n.li,{children:"No authority may exist outside canonical state transitions."}),"\n",(0,r.jsx)(n.li,{children:"No reconstruction depends on trust."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"32-tests-must-be",children:(0,r.jsx)(n.strong,{children:"3.2 Tests Must Be:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deterministic"}),"\n",(0,r.jsx)(n.li,{children:"Replay-safe"}),"\n",(0,r.jsx)(n.li,{children:"Network-independent (for replay tests)"}),"\n",(0,r.jsx)(n.li,{children:"Hash-chain validated"}),"\n",(0,r.jsx)(n.li,{children:"Storage-order independent"}),"\n",(0,r.jsx)(n.li,{children:"Fail-closed by design"}),"\n",(0,r.jsx)(n.li,{children:"Adversarial"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Correctness overrides convenience."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"4-testing-layers",children:(0,r.jsx)(n.strong,{children:"4. Testing Layers"})}),"\n",(0,r.jsx)(n.p,{children:"Gantral testing is structured in nine enforcement layers."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-1--pure-deterministic-unit-tests",children:(0,r.jsx)(n.strong,{children:"Layer 1 \u2013 Pure Deterministic Unit Tests"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/unit"})]}),"\n",(0,r.jsx)(n.p,{children:"Covers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"State transition validation"}),"\n",(0,r.jsx)(n.li,{children:"Transition guard correctness"}),"\n",(0,r.jsx)(n.li,{children:"Artifact payload construction"}),"\n",(0,r.jsx)(n.li,{children:"Recursive hash-chain construction"}),"\n",(0,r.jsx)(n.li,{children:"Canonicalization logic"}),"\n",(0,r.jsx)(n.li,{children:"Policy output interpretation mapping"}),"\n",(0,r.jsx)(n.li,{children:"Input schema validation"}),"\n",(0,r.jsx)(n.li,{children:"Error classification determinism"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Properties:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No network"}),"\n",(0,r.jsx)(n.li,{children:"No workflow runtime"}),"\n",(0,r.jsx)(n.li,{children:"No database dependency"}),"\n",(0,r.jsx)(n.li,{children:"Sub-100ms execution"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-2--canonical-state-machine-matrix-tests",children:(0,r.jsx)(n.strong,{children:"Layer 2 \u2013 Canonical State Machine Matrix Tests"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/state_machine"})]}),"\n",(0,r.jsx)(n.p,{children:"Purpose:"}),"\n",(0,r.jsx)(n.p,{children:"Exhaustively validate the canonical transition relation."}),"\n",(0,r.jsx)(n.p,{children:"Must enforce:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All allowed transitions succeed."}),"\n",(0,r.jsx)(n.li,{children:"All non-enumerated transitions terminate execution."}),"\n",(0,r.jsx)(n.li,{children:"Duplicate transitions are rejected."}),"\n",(0,r.jsx)(n.li,{children:"Skipped-state transitions are rejected."}),"\n",(0,r.jsx)(n.li,{children:"Authority states (APPROVED / REJECTED / OVERRIDDEN) only reachable from WAITING_FOR_HUMAN."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"authority-exclusivity-enforcement",children:(0,r.jsx)(n.strong,{children:"Authority Exclusivity Enforcement"})}),"\n",(0,r.jsx)(n.p,{children:"Additional required tests:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No artifact emission without a valid state transition."}),"\n",(0,r.jsx)(n.li,{children:"No state transition to authority state without artifact emission."}),"\n",(0,r.jsx)(n.li,{children:"Manual DB authority insert \u2192 replay INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Manual artifact injection without canonical state progression \u2192 replay INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Authority records cannot exist outside canonical workflow state."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-3--artifact-integrity--chain-enforcement",children:(0,r.jsx)(n.strong,{children:"Layer 3 \u2013 Artifact Integrity & Chain Enforcement"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/artifact"})]}),"\n",(0,r.jsx)(n.p,{children:"Must enforce:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Valid artifact chain \u2192 VALID."}),"\n",(0,r.jsx)(n.li,{children:"Hash mismatch \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Tampered authority_state \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Tampered policy_version_id \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Tampered workflow_version_id \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Tampered justification \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Tampered timestamp \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Missing prev_artifact_hash \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Duplicate artifact_id \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Circular chain reference \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Chain truncation \u2192 INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Chain gap detection \u2192 INVALID."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"storage-order-independence",children:(0,r.jsx)(n.strong,{children:"Storage-Order Independence"})}),"\n",(0,r.jsx)(n.p,{children:"Replay must:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Accept artifacts in arbitrary file order."}),"\n",(0,r.jsx)(n.li,{children:"Reconstruct the chain deterministically."}),"\n",(0,r.jsx)(n.li,{children:"Ignore extraneous artifacts not linked to the chain."}),"\n",(0,r.jsx)(n.li,{children:"Reject reconstruction dependent on storage listing order."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-4--replay--verifier-tests",children:(0,r.jsx)(n.strong,{children:"Layer 4 \u2013 Replay & Verifier Tests"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/replay"})]}),"\n",(0,r.jsx)(n.p,{children:"Replay must validate:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Hash-chain integrity."}),"\n",(0,r.jsx)(n.li,{children:"Transition validity."}),"\n",(0,r.jsx)(n.li,{children:"workflow_version_id consistency."}),"\n",(0,r.jsx)(n.li,{children:"policy_version_id consistency."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Replay must:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Require no database."}),"\n",(0,r.jsx)(n.li,{children:"Require no runtime."}),"\n",(0,r.jsx)(n.li,{children:"Ignore logs."}),"\n",(0,r.jsx)(n.li,{children:"Ignore telemetry."}),"\n",(0,r.jsx)(n.li,{children:"Ignore agent memory."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cli-contract-locking",children:(0,r.jsx)(n.strong,{children:"CLI Contract Locking"})}),"\n",(0,r.jsx)(n.p,{children:"Tests must validate:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gantral verify"})," outputs exactly: VALID / INVALID / INCONCLUSIVE."]}),"\n",(0,r.jsx)(n.li,{children:"Exit codes are deterministic."}),"\n",(0,r.jsx)(n.li,{children:"No nondeterministic output ordering."}),"\n",(0,r.jsx)(n.li,{children:"Replay emits no artifacts."}),"\n",(0,r.jsx)(n.li,{children:"Replay produces no side effects."}),"\n",(0,r.jsx)(n.li,{children:"Error classification identical across runs."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-5--policy-advisory-boundary-enforcement",children:(0,r.jsx)(n.strong,{children:"Layer 5 \u2013 Policy Advisory Boundary Enforcement"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/policy"})]}),"\n",(0,r.jsx)(n.p,{children:"Must enforce:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ALLOW \u2192 continue."}),"\n",(0,r.jsx)(n.li,{children:"REQUIRE_HUMAN \u2192 WAITING_FOR_HUMAN."}),"\n",(0,r.jsx)(n.li,{children:"DENY \u2192 TERMINATED."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"policy-boundary-guarantees",children:(0,r.jsx)(n.strong,{children:"Policy Boundary Guarantees"})}),"\n",(0,r.jsx)(n.p,{children:"Policy must never:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Emit artifacts."}),"\n",(0,r.jsx)(n.li,{children:"Approve execution directly."}),"\n",(0,r.jsx)(n.li,{children:"Mutate workflow state."}),"\n",(0,r.jsx)(n.li,{children:"Inject authority decisions."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Required tests:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Malicious policy output containing artifact-like fields \u2192 rejected."}),"\n",(0,r.jsx)(n.li,{children:"Policy returning approval decision directly \u2192 ignored."}),"\n",(0,r.jsx)(n.li,{children:"Policy unavailability at high materiality \u2192 fail-closed."}),"\n",(0,r.jsx)(n.li,{children:"REQUIRE_HUMAN returned but no WAITING_FOR_HUMAN transition \u2192 execution fails."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"context-snapshot-binding-enforcement",children:(0,r.jsx)(n.strong,{children:"Context Snapshot Binding Enforcement"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Snapshot captured before policy evaluation."}),"\n",(0,r.jsx)(n.li,{children:"Snapshot used for policy evaluation must equal snapshot hashed in artifact."}),"\n",(0,r.jsx)(n.li,{children:"Mutation between evaluation and emission \u2192 execution aborts."}),"\n",(0,r.jsx)(n.li,{children:"Snapshot must exclude agent internal memory."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-6--integration-tests-runtime--policy--storage",children:(0,r.jsx)(n.strong,{children:"Layer 6 \u2013 Integration Tests (Runtime + Policy + Storage)"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/integration"})]}),"\n",(0,r.jsx)(n.p,{children:"Covers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full lifecycle execution."}),"\n",(0,r.jsx)(n.li,{children:"Atomic artifact emission."}),"\n",(0,r.jsx)(n.li,{children:"No hidden retries."}),"\n",(0,r.jsx)(n.li,{children:"No execution past authority boundary without artifact persistence."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"storage-authority-boundary-enforcement",children:(0,r.jsx)(n.strong,{children:"Storage Authority Boundary Enforcement"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DB shows APPROVED but artifact missing \u2192 replay INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Artifact chain valid but DB missing \u2192 replay VALID."}),"\n",(0,r.jsx)(n.li,{children:"Cross-region replication incomplete \u2192 replay INVALID."}),"\n",(0,r.jsx)(n.li,{children:"Partial artifact persistence \u2192 execution aborts."}),"\n",(0,r.jsx)(n.li,{children:"Replay cannot succeed if chain incomplete due to replication lag."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-7--auditor-conformance-tests",children:(0,r.jsx)(n.strong,{children:"Layer 7 \u2013 Auditor Conformance Tests"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/auditor"})]}),"\n",(0,r.jsx)(n.p,{children:"Must prove:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Authority decisions are cryptographically bound."}),"\n",(0,r.jsx)(n.li,{children:"Policy version recorded in artifact."}),"\n",(0,r.jsx)(n.li,{children:"Identity verified at decision time."}),"\n",(0,r.jsx)(n.li,{children:"Context bound via hash."}),"\n",(0,r.jsx)(n.li,{children:"Replay independent of logs and runtime."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Tests include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"IdP offline \u2192 replay VALID."}),"\n",(0,r.jsx)(n.li,{children:"Logs modified \u2192 replay unaffected."}),"\n",(0,r.jsx)(n.li,{children:"Policy bundle unavailable \u2192 replay unaffected."}),"\n",(0,r.jsx)(n.li,{children:"Organization rename \u2192 replay VALID."}),"\n",(0,r.jsx)(n.li,{children:"Role deletion \u2192 replay VALID."}),"\n",(0,r.jsx)(n.li,{children:"Database deleted \u2192 replay VALID."}),"\n",(0,r.jsx)(n.li,{children:"Replay depends only on artifact chain."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-8--unified-visibility-tests",children:(0,r.jsx)(n.strong,{children:"Layer 8 \u2013 Unified Visibility Tests"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/visibility"})]}),"\n",(0,r.jsx)(n.p,{children:"Must enforce:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"WAITING_FOR_HUMAN instances visible."}),"\n",(0,r.jsx)(n.li,{children:"Authority progression visible historically."}),"\n",(0,r.jsx)(n.li,{children:"Visibility reflects canonical workflow state only."}),"\n",(0,r.jsx)(n.li,{children:"Visibility cannot contradict artifact chain."}),"\n",(0,r.jsx)(n.li,{children:"Visibility failure does not affect replay validity."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"layer-9--agent-isolation--memory-boundary-tests",children:(0,r.jsx)(n.strong,{children:"Layer 9 \u2013 Agent Isolation & Memory Boundary Tests"})}),"\n",(0,r.jsxs)(n.p,{children:["Location: ",(0,r.jsx)(n.code,{children:"/tests/agent"})]}),"\n",(0,r.jsx)(n.p,{children:"Must enforce:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Agent memory never included in artifact payload."}),"\n",(0,r.jsx)(n.li,{children:"Attempt to include agent memory in snapshot \u2192 rejected."}),"\n",(0,r.jsx)(n.li,{children:"Post-approval agent mutation does not affect replay."}),"\n",(0,r.jsx)(n.li,{children:"Agent restart does not alter artifact chain."}),"\n",(0,r.jsx)(n.li,{children:"Agent cannot bypass authority through retries."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"5-coverage-categories",children:(0,r.jsx)(n.strong,{children:"5. Coverage Categories"})}),"\n",(0,r.jsx)(n.p,{children:"Gantral test coverage must include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"State coverage"}),"\n",(0,r.jsx)(n.li,{children:"Transition coverage"}),"\n",(0,r.jsx)(n.li,{children:"Authority exclusivity coverage"}),"\n",(0,r.jsx)(n.li,{children:"Artifact mutation coverage"}),"\n",(0,r.jsx)(n.li,{children:"Replay isolation coverage"}),"\n",(0,r.jsx)(n.li,{children:"Context snapshot binding coverage"}),"\n",(0,r.jsx)(n.li,{children:"Policy advisory boundary coverage"}),"\n",(0,r.jsx)(n.li,{children:"Storage-order independence coverage"}),"\n",(0,r.jsx)(n.li,{children:"Database contradiction coverage"}),"\n",(0,r.jsx)(n.li,{children:"Identity drift coverage"}),"\n",(0,r.jsx)(n.li,{children:"CLI contract coverage"}),"\n",(0,r.jsx)(n.li,{children:"Auditor independence coverage"}),"\n",(0,r.jsx)(n.li,{children:"Unified visibility coverage"}),"\n",(0,r.jsx)(n.li,{children:"Agent isolation coverage"}),"\n",(0,r.jsx)(n.li,{children:"Cross-region storage coverage"}),"\n",(0,r.jsx)(n.li,{children:"Hash-chain continuity"}),"\n",(0,r.jsx)(n.li,{children:"Canonicalization determinism"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"6-ci-enforcement-gates",children:(0,r.jsx)(n.strong,{children:"6. CI Enforcement Gates"})}),"\n",(0,r.jsx)(n.p,{children:"CI must fail if:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"State transition coverage < 100%."}),"\n",(0,r.jsx)(n.li,{children:"Any authority state reachable without artifact emission."}),"\n",(0,r.jsx)(n.li,{children:"Artifact schema changes without version bump."}),"\n",(0,r.jsx)(n.li,{children:"Replay output differs from golden baseline."}),"\n",(0,r.jsx)(n.li,{children:"Canonical bytes differ unexpectedly."}),"\n",(0,r.jsx)(n.li,{children:"Policy advisory boundary violated."}),"\n",(0,r.jsx)(n.li,{children:"CLI contract changes."}),"\n",(0,r.jsx)(n.li,{children:"Storage-order replay differs."}),"\n",(0,r.jsx)(n.li,{children:"Any nondeterminism detected."}),"\n",(0,r.jsx)(n.li,{children:"Any ambiguity bypasses execution."}),"\n",(0,r.jsx)(n.li,{children:"Any authority exists outside canonical state."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"7-release-gate-requirements",children:(0,r.jsx)(n.strong,{children:"7. Release Gate Requirements"})}),"\n",(0,r.jsx)(n.p,{children:"Before release:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full cross-language canonical equivalence validated."}),"\n",(0,r.jsx)(n.li,{children:"Replay stable across previous workflow versions."}),"\n",(0,r.jsx)(n.li,{children:"Golden artifact regression suite passes."}),"\n",(0,r.jsx)(n.li,{children:"Cross-region storage replay validated."}),"\n",(0,r.jsx)(n.li,{children:"Auditor conformance suite passes."}),"\n",(0,r.jsx)(n.li,{children:"No schema drift without compatibility matrix update."}),"\n",(0,r.jsx)(n.li,{children:"No canonicalization change without cross-language verification."}),"\n",(0,r.jsx)(n.li,{children:"No workflow version binding drift."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h1,{id:"8-constitutional-enforcement-statement",children:(0,r.jsx)(n.strong,{children:"8. Constitutional Enforcement Statement"})}),"\n",(0,r.jsx)(n.p,{children:"With this blueprint:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Authority cannot exist outside canonical workflow state."}),"\n",(0,r.jsx)(n.li,{children:"Policy cannot assume authority."}),"\n",(0,r.jsx)(n.li,{children:"Artifact chain cannot be reordered, truncated, or substituted."}),"\n",(0,r.jsx)(n.li,{children:"Replay cannot depend on logs, database, or runtime."}),"\n",(0,r.jsx)(n.li,{children:"Storage ordering cannot influence verification."}),"\n",(0,r.jsx)(n.li,{children:"Identity drift cannot invalidate admissibility."}),"\n",(0,r.jsx)(n.li,{children:"Agent memory cannot influence authority evidence."}),"\n",(0,r.jsx)(n.li,{children:"Unified visibility reflects canonical state only."}),"\n",(0,r.jsx)(n.li,{children:"CLI verification behavior is deterministic and stable."}),"\n",(0,r.jsx)(n.li,{children:"Auditor guarantees are mechanically provable."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Gantral\u2019s admissibility claim is therefore:"}),"\n",(0,r.jsxs)(n.p,{children:["Not a design assertion.",(0,r.jsx)(n.br,{}),"\n","Not a documentation claim.",(0,r.jsx)(n.br,{}),"\n","But an executable invariant."]}),"\n",(0,r.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>a});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);