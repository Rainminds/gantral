"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[1351],{8398(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"architecture/state-machine","title":"State Machine","description":"Gantral enforces a strict, deterministic state machine for all AI execution instances. This lifecycle guarantees that no agent can proceed past a critical boundary without explicit authorization.","source":"@site/../docs/architecture/state-machine.md","sourceDirName":"architecture","slug":"/architecture/state-machine","permalink":"/architecture/state-machine","draft":false,"unlisted":false,"editUrl":"https://github.com/Rainminds/gantral/tree/main/../docs/architecture/state-machine.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"State Machine"},"sidebar":"tutorialSidebar","previous":{"title":"Technical Reference & Architecture Document","permalink":"/architecture/trd"},"next":{"title":"Execution Authority vs Agent Memory vs Runtime","permalink":"/architecture/execution-authority-vs-agent-memory"}}');var r=n(4848),s=n(8453);const a={sidebar_position:2,title:"State Machine"},l="Execution State Machine",c={},o=[{value:"Lifecycle Diagram",id:"lifecycle-diagram",level:2},{value:"State Definitions",id:"state-definitions",level:2},{value:"Invariants &amp; Guarantees",id:"invariants--guarantees",level:2}];function d(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"execution-state-machine",children:"Execution State Machine"})}),"\n",(0,r.jsx)(t.p,{children:"Gantral enforces a strict, deterministic state machine for all AI execution instances. This lifecycle guarantees that no agent can proceed past a critical boundary without explicit authorization."}),"\n",(0,r.jsx)(t.h2,{id:"lifecycle-diagram",children:"Lifecycle Diagram"}),"\n",(0,r.jsx)(t.p,{children:"The following Mermaid diagram illustrates the only valid transitions in the Gantral protocol."}),"\n",(0,r.jsx)(t.mermaid,{value:'stateDiagram-v2\n    [*] --\x3e CREATED\n    CREATED --\x3e RUNNING\n    \n    RUNNING --\x3e WAITING_FOR_HUMAN: Policy Trigger / Threshold\n    RUNNING --\x3e COMPLETED: Success\n    RUNNING --\x3e TERMINATED: Error / Failure\n    \n    state "Human Authority Zone" as AuthorityZone {\n        WAITING_FOR_HUMAN --\x3e APPROVED: Human Says "Yes"\n        WAITING_FOR_HUMAN --\x3e REJECTED: Human Says "No"\n        WAITING_FOR_HUMAN --\x3e OVERRIDDEN: "Yes" + Modified Context\n    }\n    \n    APPROVED --\x3e RESUMED\n    OVERRIDDEN --\x3e RESUMED\n    \n    RESUMED --\x3e RUNNING: New Process / Worker\n    \n    REJECTED --\x3e TERMINATED\n    \n    COMPLETED --\x3e [*]\n    TERMINATED --\x3e [*]'}),"\n",(0,r.jsx)(t.h2,{id:"state-definitions",children:"State Definitions"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"State"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Role & Behavior"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"CREATED"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Instance initialized. Parameters are validated but execution has not begun."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"RUNNING"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Workflow is actively executing. CPU resources are consumed."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"WAITING_FOR_HUMAN"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:[(0,r.jsx)(t.strong,{children:"Critical Paused State."})," Execution is suspended by policy. ",(0,r.jsx)("br",{}),(0,r.jsx)(t.em,{children:"Note:"})," In this state, the agent process should ideally exit (Zero CPU) to save costs."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"APPROVED"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A human actor explicitly authorized the continuation."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"REJECTED"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A human actor denied the request. Execution moves to TERMINATED immediately."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"OVERRIDDEN"})}),(0,r.jsxs)(t.td,{style:{textAlign:"left"},children:["A human actor authorized the request but ",(0,r.jsx)(t.em,{children:"changed the parameters"})," (e.g., lowered a transaction amount)."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"RESUMED"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"A transient state indicating the runtime is preparing to re-launch the agent process."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"COMPLETED"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Workflow finished successfully."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.strong,{children:"TERMINATED"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:"Workflow stopped due to error, rejection, or policy denial."})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"invariants--guarantees",children:"Invariants & Guarantees"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Append-Only History:"})," States are never mutated in place. Every transition is a new event in the immutable log."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Explicit Authority:"})," An agent ",(0,r.jsx)(t.em,{children:"cannot"})," transition itself out of ",(0,r.jsx)(t.code,{children:"WAITING_FOR_HUMAN"}),". Only an authenticated external signal (API call with ",(0,r.jsx)(t.code,{children:"actor_id"}),") can trigger the ",(0,r.jsx)(t.code,{children:"APPROVED"})," or ",(0,r.jsx)(t.code,{children:"REJECTED"})," transition."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Zero-Trust Resume:"})," When transitioning from ",(0,r.jsx)(t.code,{children:"RESUMED"})," back to ",(0,r.jsx)(t.code,{children:"RUNNING"}),', the agent is not "trusted" to remember its state. It must re-hydrate from a checkpoint or receive a fresh context payload from Gantral.']}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,t,n){n.d(t,{R:()=>a,x:()=>l});var i=n(6540);const r={},s=i.createContext(r);function a(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);